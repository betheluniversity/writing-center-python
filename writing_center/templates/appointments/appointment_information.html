<div class="form-row">
    <div class="form-group col-md-12">
        <hr>
        <h2>Appointment:</h2>
        <table id="table"  class="table table-striped table-bordered">
            <thead>
                {% if schedule_appt == True %}
                    <tr>
                        <th>Tutor First Name</th>
                        <th>Tutor Last Name</th>
                        <th>Tutor Username</th>
                        <th>Instructor Name</th>
                        <th>Start Date/Start Time</th>
                        <th>End Date/End Time</th>
                        {% if appt.dropIn == 1 %}
                            <th>Drop In</th>
                        {% elif appt.multilingual == 1 %}
                            <th>Multilingual</th>
                        {% endif %}
                    </tr>
                {% else %}
                    <tr>
                        <th>Student First Name</th>
                        <th>Student Last Name</th>
                        <th>Student Username</th>
                        <th>Tutor First Name</th>
                        <th>Tutor Last Name</th>
                        <th>Tutor Username</th>
                        <th>Instructor Name</th>
                        <th>Start Date/Start Time</th>
                        <th>End Date/End Time</th>
                        {% if appt.dropIn == 1 %}
                            <th>Drop In</th>
                        {% elif appt.multilingual == 1 %}
                            <th>Multilingual</th>
                        {% endif %}
                        <th>Course or Tag</th>
                    </tr>
                {% endif %}
            </thead>
            <tbody>
                {% set tutor = id_to_user(appt.tutor_id) %}
                {% if schedule_appt == True %}
                    <tr>

                        <td>{{ tutor.firstName }}</td>
                        <td>{{ tutor.lastName }}</td>
                        <td>{{ tutor.username }}</td>
                        <td>{{ appt.profName }}</td>
                        <td>{{ appt.scheduledStart|datetimeformat('%m/%d/%y') }} - {{ appt.scheduledStart|datetimeformat }}</td>
                        <td>{{ appt.scheduledEnd|datetimeformat('%m/%d/%y') }} - {{ appt.scheduledEnd|datetimeformat }}</td>
                        {% if appt.dropIn == 1 or appt.multilingual == 1 %}
                            <td>Yes</td>
                        {% endif %}
                    </tr>
                    <tr>
                        <td colspan="10"><button class="btn btn-primary darkblue" onclick="scheduleAppointment({{ appt.id }})">Schedule Appointment</button></td>
                    </tr>
                {% else %}
                    <tr>
                        {% set student = id_to_user(appt.student_id) %}
                        <td>{{ student.firstName }}</td>
                        <td>{{ student.lastName }}</td>
                        <td>{{ student.username }}</td>
                        <td>{{ tutor.firstName }}</td>
                        <td>{{ tutor.lastName }}</td>
                        <td>{{ tutor.username }}</td>
                        <td>{{ appt.profName }}</td>
                        <td>{{ appt.scheduledStart|datetimeformat('%m/%d/%y') }} - {{ appt.scheduledStart|datetimeformat }}</td>
                        <td>{{ appt.scheduledEnd|datetimeformat('%m/%d/%y') }} - {{ appt.scheduledEnd|datetimeformat }}</td>
                        {% if appt.dropIn == 1 or appt.multilingual == 1 %}
                            <td>Yes</td>
                        {% endif %}
                        <td>{{ appt.courseCode }}</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
<script>
    $(document).ready( function () {
        var table = $('#table').DataTable({
            "aoColumns": [
            ],
            searching: false,
            paging: false,
            pageLength: false,
        });
    });

    function scheduleAppointment(appt_id) {
        $.ajax({
            type: "POST",
            url: "{{ url_for('AppointmentsView:schedule_appointment') }}",
            data: JSON.stringify({
                'appt_id': appt_id
            }),
            contentType: 'application/json;charset=UTF-8',
            success: function (response) {
                window.location.reload();
                },
            error: function (error) {
            }
        });
    }
</script>