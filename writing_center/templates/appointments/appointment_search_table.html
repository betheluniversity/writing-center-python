{% if appointments %}
    <table id="table" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Student</th>
                <th>Tutor</th>
                <th class="one-line">Scheduled Start</th>
                <th class="one-line">Scheduled End</th>
                <th>Professor</th>
                <th>Multilingual</th>
                <th>Course</th>
                <th class="one-line">No Show</th>
                <th>Info</th>
            </tr>
        </thead>
        <tbody>
            {% for appt, info in appts_and_info.items() %}
                <tr>
                    <td class="one-line">
                        {% if info['student'] %}
                            {{ info['student'].firstName }} {{ info['student'].lastName }}
                        {% else %}
                            None
                        {% endif %}
                    </td>
                    <td class="one-line">{{ info['tutor'].firstName }} {{ info['tutor'].lastName }}</td>
                    <td class="one-line">{{ appt.scheduledStart.strftime("%m/%d/%y %I:%M %p") }}</td>
                    <td class="one-line">{{ appt.scheduledEnd.strftime("%m/%d/%y %I:%M %p") }}</td>
                    <td class="one-line">{{ appt.profName }}</td>
                    <td>{{ 'Yes' if appt.multilingual else 'No' }}</td>
                    <td>{{ appt.courseCode }}</td>
                    <td>{{ 'Yes' if appt.noShow else 'No' }}</td>
                    <td><input id="{{ appt.id }}" type="button" class="more-info btn btn-primary darkblue" value="Info"
                               data-toggle="modal" data-target="#info-modal"
                               data-student="{{ '{0} {1}'.format(info['student'].firstName, info['student'].lastName) if info['student'] else 'None' }}"
                               data-tutor="{{ '{0} {1}'.format(info['tutor'].firstName, info['tutor'].lastName) if info['tutor'] else 'None' }}"
                               data-sched-start="{{ appt.scheduledStart.strftime("%m/%d/%y %I:%M %p") }}"
                               data-sched-end="{{ appt.scheduledEnd.strftime("%m/%d/%y %I:%M %p") }}"
                               data-actual-start="{{ appt.actualStart.strftime("%m/%d/%y %I:%M %p") if appt.actualStart else 'None' }}"
                               data-actual-end="{{ appt.actualEnd.strftime("%m/%d/%y %I:%M %p") if appt.actualEnd else 'None' }}"
                               data-drop-in="{{ 'Yes' if appt.dropIn else 'No' }}"
                               data-multilingual="{{ 'Yes' if appt.multilingual else 'No' }}"
                               data-no-show="{{ 'Yes' if appt.noShow else 'No' }}"
                               data-prof="{{ appt.profName }}"
                               data-prof-email="{{ appt.profEmail }}"
                               data-course="{{ appt.courseCode }}"
                               data-section="{{ appt.courseSection }}"
                               data-assignment="{{ appt.assignment }}"
                               data-notes="{{ appt.notes }}"
                               data-suggestions="{{ appt.suggestions }}"></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <script type="text/javascript">
        $(document).ready(function(){

            var table = $('#table').DataTable({
                "aaSorting": [],
                "aoColumns": [
                ],
                searching: false,
                paging: false,
                pageLength: false,
            });

        });
    </script>
{% else %}
    <p>No appointments match the current search criteria.</p>
{% endif %}

<!-- Info Modal -->
<div class="modal fade" id="info-modal" tabindex="-1" role="dialog" aria-labelledby="modal-label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modal-label">Appointment Information</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <table id="modal-table" class="table table-striped table-bordered">
                    <tr>
                        <th>Student</th>
                        <td id="student"></td>
                    </tr>
                    <tr>
                        <th>Tutor</th>
                        <td id="tutor"></td>
                    </tr>
                    <tr>
                        <th>Scheduled Start</th>
                        <td id="sched-start"></td>
                    </tr>
                    <tr>
                        <th>Scheduled End</th>
                        <td id="sched-end"></td>
                    </tr>
                    <tr>
                        <th>Actual Start</th>
                        <td id="actual-start"></td>
                    </tr>
                    <tr>
                        <th>Actual End</th>
                        <td id="actual-end"></td>
                    </tr>
                    <tr>
                        <th>Drop In</th>
                        <td id="drop-in"></td>
                    </tr>
                    <tr>
                        <th>Multilingual</th>
                        <td id="multilingual"></td>
                    </tr>
                    <tr>
                        <th>No Show</th>
                        <td id="no-show"></td>
                    </tr>
                    <tr>
                        <th>Professor</th>
                        <td id="prof"></td>
                    </tr>
                    <tr>
                        <th>Professor Email</th>
                        <td id="prof-email"></td>
                    </tr>
                    <tr>
                        <th>Course Code</th>
                        <td id="course"></td>
                    </tr>
                    <tr>
                        <th>Course Section</th>
                        <td id="section"></td>
                    </tr>
                    <tr>
                        <th>Assignment</th>
                        <td id="assignment"></td>
                    </tr>
                    <tr>
                        <th>Notes</th>
                        <td id="notes"></td>
                    </tr>
                    <tr>
                        <th>Suggestions</th>
                        <td id="suggestions"></td>
                    </tr>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary darkblue" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $('#info-modal').on('show.bs.modal', function(event){
        var button = $(event.relatedTarget);
        $(this).find('#student').text(button.data('student'));
        $(this).find('#tutor').text(button.data('tutor'));
        $(this).find('#sched-start').text(button.data('sched-start'));
        $(this).find('#sched-end').text(button.data('sched-end'));
        $(this).find('#actual-start').text(button.data('actual-start'));
        $(this).find('#actual-end').text(button.data('actual-end'));
        $(this).find('#drop-in').text(button.data('drop-in'));
        $(this).find('#multilingual').text(button.data('multilingual'));
        $(this).find('#no-show').text(button.data('no-show'));
        $(this).find('#prof').text(button.data('prof'));
        $(this).find('#prof-email').text(button.data('prof-email'));
        $(this).find('#course').text(button.data('course'));
        $(this).find('#section').text(button.data('section'));
        $(this).find('#assignment').text(button.data('assignment'));
        $(this).find('#notes').text(button.data('notes'));
        $(this).find('#suggestions').text(button.data('suggestions'));
    });
</script>